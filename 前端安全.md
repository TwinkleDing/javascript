# 前端安全

## XSS跨站脚本攻击

1. 原理：页面渲染的数据中可能包含脚本
2. 攻击的类型：反射型：url参数直接注入；存储型：存储到DB后读取时注入
3. 注入点：HTML节点的内容；HTML中DOM节点的属性；javascript代码：输入框

### 如何防御

1. 浏览器自带的防御机制，只要应对反射型攻击；http响应头中自动添加x-xss-protection，默认打开
2. 对特定字符进行转义，内容注入替换尖括号等
3. CSP：内容安全策略：指定内容可以行

## CSRF跨站请求伪造

原理：在第三方网站向本网站发起请求

1. 用户在a站前端页面发起登录（身份认证）请求
2. a站后端确认身份，登陆成功，cookie中存在用户的身份认真信息
3. b站前端页面向a站后端发起请求，带着a站的cookie信息（身份认证）请求成功

综上，只要用户访问了a站后访问b站，b站就可以带着a站的登录信息向a站发起请求

### 如何防御

特点，第三方网站使用认证信息进行访问

1. 禁止第三方网站携带本网站的cookie信息，设置same-site属性，same-site属性有俩个值，strict（所有第三方请求都不能携带本网站cookie），和lax（链接可以，但是form表单提交和ajax不行）
2. 本网站前端页面添加验证信息：使用验证码或者token验证
3. referer验证： 禁止来自第三方的请求

## 点击劫持

原理：第三方网站通过iframe内嵌一个网站，并且将iframe设为透明，将其覆盖在其他经过伪装的的dom上，伪装的可点击的dom与实际内嵌网站的可点击位置相同，

特点：用户自己做了点击，并且毫不知情

### 如何防御

1. 禁止JavaScript内嵌：当网页没有使用iframe内嵌时，top和window是相等的，当网页被内嵌时，top和window是不相等的
2. 设置http请求头
3. 一些辅助手段，比如添加验证码，提高用户安全意识